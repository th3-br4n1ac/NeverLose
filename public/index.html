<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeverLose - Running Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Mobile Header -->
        <div class="mobile-header" style="display: none;">
            <div class="hamburger" id="hamburgerBtn">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="mobile-logo">
                <span class="mobile-logo-icon">üèÉ</span>
                <span>NeverLose</span>
            </div>
            <div style="width: 40px;"></div>
        </div>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="logo">
                <div class="logo-icon">üèÉ</div>
                <span class="logo-text">NeverLose</span>
            </div>

            <ul class="nav-menu">
                <li class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </li>
                <li class="nav-item" data-page="workouts">
                    <span class="nav-icon">üèÉ</span>
                    <span>Workouts</span>
                </li>
                <li class="nav-item" data-page="analytics">
                    <span class="nav-icon">üìà</span>
                    <span>Analytics</span>
                </li>
                <li class="nav-item" data-page="calendar">
                    <span class="nav-icon">üìÖ</span>
                    <span>Calendar</span>
                </li>
                <li class="nav-item" data-page="routes">
                    <span class="nav-icon">üó∫Ô∏è</span>
                    <span>Routes</span>
                </li>
            </ul>

            <div class="sidebar-bottom">
                <div class="data-sources">
                    <h4>Data Sources</h4>
                    <div class="source-item" id="appleHealthStatus">
                        <span class="source-icon">üçé</span>
                        <span class="source-name">Apple Health</span>
                        <span class="source-status disconnected">Not loaded</span>
                    </div>
                    <div class="source-item" id="stravaStatus">
                        <span class="source-icon">üî∂</span>
                        <span class="source-name">Strava</span>
                        <span class="source-status disconnected" id="stravaStatusText">Not connected</span>
                    </div>
                </div>

                <button class="btn-settings" id="settingsBtn">
                    ‚öôÔ∏è Settings
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div class="page active" id="page-dashboard">
                <header class="page-header">
                    <h1>Dashboard</h1>
                    <div class="header-actions">
                        <div class="sync-status-container">
                            <span class="sync-indicator" id="syncStatus" title="Sync status"></span>
                            <span class="last-sync" id="lastSyncTime">Not synced</span>
                        </div>
                        <button class="btn btn-secondary" id="uploadXmlBtn" title="Import historical data from Apple Health export">
                            üìÅ Import Apple Health
                        </button>
                        <button class="btn btn-strava" id="connectStravaBtn">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                <path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169"/>
                            </svg>
                            Connect Strava
                        </button>
                    </div>
                </header>

                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìè</div>
                        <div class="stat-content">
                            <div class="stat-label">This Week</div>
                            <div class="stat-value"><span id="weekDistance">0</span> <span class="stat-unit" id="weekDistanceUnit">km</span></div>
                            <div class="stat-compare" id="weekCompare"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-content">
                            <div class="stat-label">This Month</div>
                            <div class="stat-value"><span id="monthDistance">0</span> <span class="stat-unit" id="monthDistanceUnit">km</span></div>
                            <div class="stat-compare" id="monthCompare"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÉ</div>
                        <div class="stat-content">
                            <div class="stat-label">Total Runs</div>
                            <div class="stat-value" id="totalRuns">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-content">
                            <div class="stat-label">Avg Pace</div>
                            <div class="stat-value" id="avgPace">--:--</div>
                            <div class="stat-unit" id="avgPaceUnit">/km</div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="charts-row">
                    <div class="chart-card">
                        <h3>Weekly Mileage</h3>
                        <canvas id="weeklyMileageChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Recent Activity</h3>
                        <div class="activity-list" id="recentActivity">
                            <div class="empty-state">
                                <p>No workouts yet. Upload Apple Health data or connect Strava to get started.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Workouts Page -->
            <div class="page" id="page-workouts">
                <header class="page-header">
                    <h1>Workouts</h1>
                    <div class="header-actions">
                        <div class="search-box">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="workoutSearch" placeholder="Search workouts...">
                        </div>
                        <select id="sourceFilter">
                            <option value="">All Sources</option>
                            <option value="apple">Apple Health</option>
                            <option value="strava">Strava</option>
                            <option value="both">Both Sources</option>
                        </select>
                        <select id="dateRange">
                            <option value="">All Time</option>
                            <option value="7">Last 7 Days</option>
                            <option value="30">Last 30 Days</option>
                            <option value="90">Last 90 Days</option>
                            <option value="365">This Year</option>
                        </select>
                    </div>
                </header>

                <div class="workouts-table-wrapper">
                    <table class="workouts-table">
                        <thead>
                            <tr>
                                <th data-sort="date">Date</th>
                                <th data-sort="duration">Duration</th>
                                <th data-sort="distance">Distance</th>
                                <th data-sort="pace">Pace</th>
                                <th data-sort="calories">Calories</th>
                                <th data-sort="heartrate">Heart Rate</th>
                                <th>Source</th>
                            </tr>
                        </thead>
                        <tbody id="workoutsTableBody">
                        </tbody>
                    </table>
                    <div class="pagination" id="workoutsPagination">
                    </div>
                </div>
            </div>

            <!-- Analytics Page -->
            <div class="page" id="page-analytics">
                <header class="page-header">
                    <h1>Analytics</h1>
                    <div class="header-actions">
                        <div class="date-range-controls">
                            <select id="analyticsRange">
                                <option value="30">Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="180">Last 6 Months</option>
                                <option value="365" selected>Last Year</option>
                                <option value="all">All Time</option>
                                <option value="custom">Custom Range</option>
                            </select>
                            <div id="customDateRange" style="display: none; margin-left: 10px;">
                                <input type="date" id="startDate" style="margin-right: 8px;">
                                <span>to</span>
                                <input type="date" id="endDate" style="margin-left: 8px;">
                            </div>
                        </div>
                    </div>
                </header>

                <div class="analytics-grid">
                    <div class="chart-card large">
                        <h3>Distance Over Time</h3>
                        <canvas id="distanceChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Pace Progression</h3>
                        <canvas id="paceChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Heart Rate Zones</h3>
                        <canvas id="hrZonesChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Training Volume</h3>
                        <canvas id="volumeChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Day of Week Distribution</h3>
                        <canvas id="dayDistributionChart"></canvas>
                    </div>
                </div>

                <!-- Run Comparison Section -->
                <div class="comparison-section" style="margin-top: 32px;">
                    <div class="comparison-header">
                        <h2>Compare Runs</h2>
                        <div class="comparison-controls">
                            <button class="btn btn-primary" id="openComparisonModal">+ Add Runs to Compare</button>
                            <button class="btn" id="clearComparison" style="display: none;">Clear Comparison</button>
                        </div>
                    </div>
                    <div id="comparisonCharts" style="display: none;">
                        <div style="margin-bottom: 20px;">
                            <label for="comparisonMetric" style="margin-right: 12px; color: var(--text-secondary);">Compare:</label>
                            <select id="comparisonMetric" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--bg-secondary); color: var(--text-primary); min-width: 200px;">
                                <option value="heartrate">Heart Rate</option>
                                <option value="pace">Pace</option>
                                <option value="cadence">Cadence</option>
                                <option value="stride">Stride Length</option>
                            </select>
                        </div>
                        <div class="comparison-charts-grid">
                            <div class="chart-card large">
                                <h3 id="comparisonChartTitle">Heart Rate Comparison</h3>
                                <canvas id="comparisonChart"></canvas>
                            </div>
                        </div>
                        <div id="comparisonStats" class="comparison-stats-grid"></div>
                    </div>
                </div>
            </div>

            <!-- Comparison Modal -->
            <div class="modal" id="comparisonModal">
                <div class="modal-content" style="max-width: 700px;">
                    <div class="modal-header">
                        <h2>Select Runs to Compare</h2>
                        <button class="modal-close" onclick="document.getElementById('comparisonModal').classList.remove('active')">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="comparison-workouts-list" id="comparisonWorkoutsList" style="max-height: 400px; overflow-y: auto;">
                            <!-- Workouts will be populated here -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="document.getElementById('comparisonModal').classList.remove('active')">Cancel</button>
                        <button class="btn btn-primary" id="applyComparison">Compare Selected Runs</button>
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
            <div class="page" id="page-calendar">
                <header class="page-header">
                    <h1>Training Calendar</h1>
                    <div class="header-actions">
                        <button class="btn" id="prevMonth">‚Üê Previous</button>
                        <span class="calendar-month" id="currentMonth">January 2026</span>
                        <button class="btn" id="nextMonth">Next ‚Üí</button>
                        <button class="btn" id="downloadPlanTemplate">üì• Template</button>
                        <button class="btn btn-primary" id="uploadPlanCsv">üì§ Upload Plan</button>
                        <button class="btn btn-primary" id="addPlannedWorkout">+ Plan Workout</button>
                        <button class="btn btn-danger" id="clearCalendarBtn">üóëÔ∏è Clear Plan</button>
                        <input type="file" id="planCsvInput" accept=".csv" style="display: none;">
                    </div>
                </header>

                <div class="calendar-legend">
                    <span class="legend-item"><span class="legend-dot completed"></span> Completed</span>
                    <span class="legend-item"><span class="legend-dot planned"></span> Planned</span>
                    <span class="legend-item"><span class="legend-dot missed"></span> Missed</span>
                    <span class="legend-item"><span class="legend-dot exceeded"></span> Exceeded Plan</span>
                </div>

                <div class="calendar-grid" id="calendarGrid">
                </div>
            </div>

            <!-- Routes Page -->
            <div class="page" id="page-routes">
                <header class="page-header">
                    <h1>Routes</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary" id="uploadGpxBtn">
                            üìÅ Upload GPX Files
                        </button>
                        <input type="file" id="gpxInput" accept=".gpx" multiple hidden>
                    </div>
                </header>

                <div class="routes-container">
                    <!-- Route List Sidebar -->
                    <div class="routes-sidebar">
                        <div class="routes-search">
                            <input type="text" id="routeSearch" placeholder="Search routes...">
                        </div>
                        <div class="routes-filters">
                            <select id="routeHRFilter">
                                <option value="all">All HR Data</option>
                                <option value="detailed">Detailed HR Only</option>
                                <option value="avg-only">Avg HR Only</option>
                                <option value="none">No HR Data</option>
                            </select>
                            <select id="routeSortBy">
                                <option value="date-desc">Date (Newest)</option>
                                <option value="date-asc">Date (Oldest)</option>
                                <option value="distance-desc">Distance (Longest)</option>
                                <option value="distance-asc">Distance (Shortest)</option>
                                <option value="duration-desc">Duration (Longest)</option>
                                <option value="duration-asc">Duration (Shortest)</option>
                                <option value="pace-asc">Pace (Fastest)</option>
                                <option value="pace-desc">Pace (Slowest)</option>
                                <option value="location">Group by Location</option>
                            </select>
                        </div>
                        <div class="routes-list" id="routesList">
                            <div class="empty-state">
                                <p>No routes loaded. Upload GPX files from your Apple Health export.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Map and Controls -->
                    <div class="routes-main">
                        <div class="map-container" id="routeMap"></div>

                        <!-- Playback Controls -->
                        <div class="playback-controls" id="playbackControls" style="display: none;">
                            <div class="playback-info">
                                <span class="playback-stat" id="playbackDistance">0.00 km</span>
                                <span class="playback-stat" id="playbackTime">00:00</span>
                                <span class="playback-stat" id="playbackPace">--:--/km</span>
                            </div>
                            <div class="playback-slider-container">
                                <input type="range" id="playbackSlider" min="0" max="100" value="0">
                            </div>
                            <div class="playback-buttons">
                                <button class="btn" id="playbackPrev">‚èÆÔ∏è</button>
                                <button class="btn btn-primary" id="playbackPlayPause">‚ñ∂Ô∏è Play</button>
                                <button class="btn" id="playbackNext">‚è≠Ô∏è</button>
                                <select id="playbackSpeed">
                                    <option value="0.5">0.5x (Slow-mo)</option>
                                    <option value="1" selected>1x (Real-time)</option>
                                    <option value="2">2x</option>
                                    <option value="5">5x</option>
                                    <option value="10">10x</option>
                                    <option value="20">20x</option>
                                </select>
                            </div>
                        </div>

                        <!-- Comparison Panel (above route info) -->
                        <div class="comparison-panel" id="comparisonPanel" style="display: none;">
                            <div class="comparison-header">
                                <h3>Route Comparison</h3>
                                <button class="btn" id="closeComparison">‚úï Close</button>
                            </div>
                            <div class="comparison-routes">
                                <div class="comparison-route" style="border-color: #ff6b35;">
                                    <h4>Route 1 (Orange)</h4>
                                    <select id="compareRoute1"></select>
                                    <div class="comparison-stats" id="compareStats1"></div>
                                </div>
                                <div class="comparison-route" style="border-color: #3b82f6;">
                                    <h4>Route 2 (Blue)</h4>
                                    <select id="compareRoute2"></select>
                                    <div class="comparison-stats" id="compareStats2"></div>
                                </div>
                            </div>
                            <div class="comparison-options">
                                <label class="overlay-toggle">
                                    <input type="checkbox" id="overlayMode">
                                    <span>üìç Overlay Routes (align start points)</span>
                                </label>
                                <div class="race-speed-control">
                                    <label>Playback Speed:</label>
                                    <select id="raceSpeed">
                                        <option value="0.5">0.5x (Slow-mo)</option>
                                        <option value="1">1x (Real-time)</option>
                                        <option value="2">2x</option>
                                        <option value="5">5x</option>
                                        <option value="10" selected>10x</option>
                                        <option value="30">30x</option>
                                        <option value="60">60x (1 min = 1 sec)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="comparison-diff" id="comparisonDiff"></div>
                            <button class="btn btn-primary" id="raceRoutesBtn">üèÅ Race!</button>
                        </div>

                        <!-- Route Info Panel -->
                        <div class="route-info-panel" id="routeInfoPanel" style="display: none;">
                            <h3 id="routeInfoName">Route Name</h3>
                            <div class="route-stats">
                                <div class="route-stat">
                                    <span class="stat-label">Distance</span>
                                    <span class="stat-value" id="routeInfoDistance">0.00 km</span>
                                </div>
                                <div class="route-stat">
                                    <span class="stat-label">Duration</span>
                                    <span class="stat-value" id="routeInfoDuration">00:00</span>
                                </div>
                                <div class="route-stat">
                                    <span class="stat-label">Pace</span>
                                    <span class="stat-value" id="routeInfoPace">--:--/km</span>
                                </div>
                                <div class="route-stat">
                                    <span class="stat-label">Date</span>
                                    <span class="stat-value" id="routeInfoDate">-</span>
                                </div>
                            </div>
                            <div class="route-actions">
                                <button class="btn" id="compareRouteBtn">üîÑ Compare</button>
                                <button class="btn" id="playRouteBtn">‚ñ∂Ô∏è Play</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close" id="closeSettings">√ó</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label>Distance Unit</label>
                    <div class="toggle-group">
                        <button class="toggle-btn active" data-unit="km">Kilometers</button>
                        <button class="toggle-btn" data-unit="mi">Miles</button>
                    </div>
                </div>
                <div class="setting-group">
                    <label>Heart Rate Zones (based on max HR)</label>
                    <input type="number" id="maxHR" value="190" min="140" max="220">
                </div>
                <div class="setting-group">
                    <h4>Data Management</h4>
                    <button class="btn btn-danger" id="clearAllData">Clear Apple Health Data</button>
                    <button class="btn" id="exportData">Export Data (JSON)</button>
                </div>
                <div class="setting-group" id="stravaSettings" style="display: none;">
                    <h4>Strava Connection</h4>
                    <p>Connected as: <span id="stravaAthleteName"></span></p>
                    <div class="setting-row">
                        <label class="toggle-label">
                            <input type="checkbox" id="autoSyncToggle" checked>
                            <span>Auto-sync every 15 minutes</span>
                        </label>
                    </div>
                    <div class="setting-row">
                        <button class="btn" id="forceSyncStrava">üîÑ Sync Now</button>
                        <button class="btn btn-danger" id="disconnectStrava">Disconnect Strava</button>
                    </div>
                </div>
                <div class="setting-group">
                    <h4>Data Sync Info</h4>
                    <p class="info-text">
                        <strong>üí° How it works:</strong> Your Apple Watch workouts automatically sync to Strava.
                        This app pulls data from Strava's API, so you don't need to manually export Apple Health data.
                    </p>
                    <p class="info-text">
                        <strong>üçé Apple Health Import:</strong> Use this only for historical data that hasn't synced to Strava,
                        or if you prefer Apple's detailed metrics.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Apple Health Export</h2>
                <button class="modal-close" id="closeUpload">√ó</button>
            </div>
            <div class="modal-body">
                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">üìÅ</div>
                    <h3>Select your export.xml</h3>
                    <p>From your Apple Health Export folder</p>
                    <label class="btn btn-primary" style="margin-top: 1rem; display: inline-block; cursor: pointer;">
                        Choose File
                        <input type="file" id="fileInput" accept="*/*" style="position: absolute; opacity: 0; width: 100%; height: 100%; left: 0; top: 0; cursor: pointer;">
                    </label>
                </div>
                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <p id="progressText">Processing...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Planned Workout Modal -->
    <div class="modal" id="plannedWorkoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="plannedModalTitle">Plan Workout</h2>
                <button class="modal-close" id="closePlannedWorkout">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Completed workout info (shown when workout exists) -->
                <div id="completedWorkoutInfo" class="completed-workout-info" style="display: none;">
                    <h4>‚úÖ Completed Workout</h4>
                    <div class="completed-stats">
                        <span id="completedDistance"></span>
                        <span id="completedDuration"></span>
                        <span id="completedPace"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="plannedDate">
                </div>
                <div class="form-group">
                    <label>Workout Type</label>
                    <select id="plannedType">
                        <option value="easy">Easy Run</option>
                        <option value="tempo">Tempo Run</option>
                        <option value="interval">Interval Training</option>
                        <option value="long">Long Run</option>
                        <option value="recovery">Recovery Run</option>
                        <option value="race">Race</option>
                        <option value="rest">Rest Day</option>
                    </select>
                </div>
                <div class="form-group" id="distanceGroup">
                    <label>Planned Distance (<span id="plannedDistanceUnit">km</span>)</label>
                    <input type="number" id="plannedDistance" step="0.1" min="0">
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="plannedNotes" rows="3" placeholder="e.g., 5K easy, stay in Zone 2"></textarea>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="savePlannedWorkout">Save</button>
                    <button class="btn btn-danger" id="deletePlannedWorkout" style="display: none;">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Workout Detail Modal -->
    <div class="modal" id="workoutDetailModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="workoutDetailTitle">Workout Details</h2>
                <button class="modal-close" id="closeWorkoutDetail">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Summary Stats -->
                <div class="workout-detail-summary">
                    <div class="detail-stat">
                        <span class="detail-icon">üìè</span>
                        <span class="detail-value" id="detailDistance">--</span>
                        <span class="detail-label">Distance</span>
                    </div>
                    <div class="detail-stat">
                        <span class="detail-icon">‚è±Ô∏è</span>
                        <span class="detail-value" id="detailDuration">--</span>
                        <span class="detail-label">Duration</span>
                    </div>
                    <div class="detail-stat">
                        <span class="detail-icon">‚ö°</span>
                        <span class="detail-value" id="detailPace">--</span>
                        <span class="detail-label">Avg Pace</span>
                    </div>
                    <div class="detail-stat">
                        <span class="detail-icon">‚ù§Ô∏è</span>
                        <span class="detail-value" id="detailHR">--</span>
                        <span class="detail-label">Avg HR</span>
                    </div>
                    <div class="detail-stat">
                        <span class="detail-icon">ü´Å</span>
                        <span class="detail-value" id="detailVO2">--</span>
                        <span class="detail-label">Est. VO2max</span>
                    </div>
                    <div class="detail-stat">
                        <span class="detail-icon">üî•</span>
                        <span class="detail-value" id="detailCalories">--</span>
                        <span class="detail-label">Calories</span>
                    </div>
                </div>

                <!-- Additional Stats -->
                <div class="detail-section">
                    <h3>Additional Stats</h3>
                    <div class="additional-stats-grid">
                        <div class="additional-stat">
                            <span class="stat-name">Max HR</span>
                            <span class="stat-value" id="detailMaxHR">--</span>
                        </div>
                        <div class="additional-stat">
                            <span class="stat-name">Min HR</span>
                            <span class="stat-value" id="detailMinHR">--</span>
                        </div>
                        <div class="additional-stat">
                            <span class="stat-name">Best Pace</span>
                            <span class="stat-value" id="detailBestPace">--</span>
                        </div>
                        <div class="additional-stat">
                            <span class="stat-name">Elevation Gain</span>
                            <span class="stat-value" id="detailElevation">--</span>
                        </div>
                        <div class="additional-stat">
                            <span class="stat-name">Cadence</span>
                            <span class="stat-value" id="detailCadence">--</span>
                        </div>
                        <div class="additional-stat">
                            <span class="stat-name">Stride Length</span>
                            <span class="stat-value" id="detailStride">--</span>
                        </div>
                    </div>
                </div>

                <!-- HR Zones -->
                <div class="detail-section">
                    <h3>Heart Rate Zones</h3>
                    <div class="hr-zones-container">
                        <canvas id="detailHRZonesChart" height="100"></canvas>
                    </div>
                    <div class="hr-zones-legend" id="detailHRZonesLegend"></div>
                </div>

                <!-- Pace Chart -->
                <div class="detail-section detail-chart-section">
                    <h3>Pace Over Time</h3>
                    <div class="chart-container-small">
                        <canvas id="paceDetailChart"></canvas>
                    </div>
                </div>

                <!-- Heart Rate Chart -->
                <div class="detail-section detail-chart-section">
                    <h3>Heart Rate Over Time</h3>
                    <div class="chart-container-small">
                        <canvas id="hrDetailChart"></canvas>
                    </div>
                </div>

                <!-- Cadence Chart -->
                <div class="detail-section detail-chart-section">
                    <h3>Cadence Over Time</h3>
                    <div class="chart-container-small">
                        <canvas id="cadenceDetailChart"></canvas>
                    </div>
                </div>

                <!-- Stride Length Chart -->
                <div class="detail-section detail-chart-section">
                    <h3>Stride Length Over Time</h3>
                    <div class="chart-container-small">
                        <canvas id="strideDetailChart"></canvas>
                    </div>
                </div>

                <!-- Route Map -->
                <div class="detail-section" id="detailRouteSection" style="display: none;">
                    <h3>Route</h3>
                    <div id="detailRouteMap" style="height: 300px; border-radius: 12px;"></div>
                    <div class="route-detail-stats" id="detailRouteStats"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="db.js"></script>
    <script src="strava.js"></script>
    <script src="parser.js"></script>
    <script src="charts.js"></script>
    <script src="calendar.js"></script>
    <script src="routes.js"></script>
    <script src="default-plan.js"></script>
    <script src="app.js"></script>
</body>
</html>
